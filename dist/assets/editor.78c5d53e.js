import{T as k,E as w}from"./style.fc67a5d8.js";import{d as y,J as F,I as V,X as E,A as L,r as i,o as a,a as d,i as N,c as u,j as m,b as f,h as p,W as h,w as g,F as O,f as T,_ as U}from"./index.69214aa4.js";import{u as j}from"./index.282830bc.js";const I={class:"main-content flex"},K={key:0,class:"title"},R=y({name:"Editor"}),z=y({...R,props:{id:{type:Number,default:()=>null},readonly:{type:Boolean,default:()=>!1},border:{type:Boolean,default:()=>!0},catalogue:{type:Boolean,default:()=>!0},disabled:{type:Boolean,default:()=>!1},container:Object,formKey:String,form:Object},emits:["change"],setup(C,{emit:A}){const e=C,_=F({titleList:[],isCatalogueFixed:!1}),b={},x={placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9..."},n=V(),v=t=>{n.value=t;const l=async(s,c)=>{await j(s.name,s,"eidtor").then(r=>{if(r.code===200){const o="https://"+r.msg.Location;c(o)}})};t.getMenuConfig("uploadImage").customUpload=l};E(()=>{const t=n.value;t!=null&&t.destroy()});const B=t=>{_.titleList=t.getElemsByTypePrefix("header")};return L(()=>{e.disabled&&n.value.disable()}),(t,l)=>{const s=i("a-anchor-link"),c=i("a-anchor"),r=i("a-affix");return a(),d("div",I,[N("div",{class:h(e.border?"editor":"border")},[e.readonly?f("",!0):(a(),u(m(k),{key:0,style:{"border-bottom":"1px solid #ccc"},editor:n.value,defaultConfig:b},null,8,["editor"])),p(m(w),{style:{width:"100%","min-height":"360px",height:"100%","overflow-y":"hidden"},modelValue:e.form[e.formKey],"onUpdate:modelValue":l[0]||(l[0]=o=>e.form[e.formKey]=o),defaultConfig:x,onOnCreated:v,onOnChange:B},null,8,["modelValue"])],2),p(r,{"offset-top":0,target:e.container},{default:g(()=>[e.catalogue?(a(),d("div",K,[e.container?(a(),u(c,{key:0,"change-hash":!1,"scroll-container":e.container},{default:g(()=>[(a(!0),d(O,null,T(_.titleList,o=>(a(),u(s,{key:o.id,href:`#${o.id}`,title:o.children[0].text,class:h(o.type)},null,8,["href","title","class"]))),128))]),_:1},8,["scroll-container"])):f("",!0)])):f("",!0)]),_:1},8,["target"])])}}});const S=U(z,[["__scopeId","data-v-15f8ce05"]]);export{S as _};
