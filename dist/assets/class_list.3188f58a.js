import{_ as W}from"./GiFooter.5a55fa68.js";import{_ as K}from"./GiTable.b79f3a1c.js";import"./index.463d26de.js";import{u as Q}from"./usePagination.b3780cfd.js";import"./viewer.a66a81bc.js";import{d as E,J as X,g as v,r as s,eO as Z,o as V,a as ee,Y as ae,c as te,w as a,h as e,i as f,t as b,j as r,e as d,y as oe,a9 as p,p as ne,l as se,_ as le}from"./index.69214aa4.js";import{g as ue,d as ce,e as ie}from"./index.5858ad72.js";import"./index.dc5868e2.js";const D=m=>(ne("data-v-8f2fa213"),m=m(),se(),m),re={class:"table-page"},de=D(()=>f("span",null,"\u65B0\u589E",-1)),me=D(()=>f("span",null,"\u641C\u7D22",-1)),_e=E({name:"Class"}),pe=E({..._e,setup(m){const{proxy:F}=oe(),o=X({q:"",dateTime:"",classForm:{id:0,name:"",status:1}}),g=v(!1),C=v([]),u=v(!1),{current:B,pageSize:w,total:A,changeCurrent:S,changePageSize:z,setTotal:P}=Q(()=>{c()}),c=async()=>{let l={pageSize:w.value,current:B.value,q:o.q,date:o.dateTime};try{g.value=!0;const t=await ue(l);t.code&&(C.value=t.list,P(t.count))}catch(t){return t}finally{g.value=!1}};c();const T=()=>(o.classForm.id=0,F.$refs.formRef.resetFields(),u.value=!0),U=l=>(o.classForm=l,u.value=!0),q=async l=>{let t=await ce({id:l});return t.code===201?(c(),p.success(t.message)):p.error(t.message)},I=async()=>{let l=await ie({name:o.classForm.name,status:o.classForm.status,id:o.classForm.id});l.code===201?(c(),p.success(l.message),u.value=!1):p.error(l.message)},O=()=>{u.value=!1};return(l,t)=>{const Y=s("icon-plus"),_=s("a-button"),y=s("a-input"),$=s("icon-search"),M=s("a-input-group"),i=s("a-table-column"),k=s("a-switch"),N=s("a-popconfirm"),R=s("a-space"),G=K,H=W,x=s("a-form-item"),j=s("a-form"),J=s("a-modal"),L=Z("loading");return V(),ee("div",re,[ae((V(),te(G,{"row-key":"id",data:C.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:{showPageSize:!0,total:r(A),current:r(B),pageSize:r(w)},onPageChange:r(S),onPageSizeChange:r(z),onRefresh:c},{"custom-extra":a(()=>[e(_,{type:"primary",onClick:T},{icon:a(()=>[e(Y)]),default:a(()=>[de]),_:1}),e(M,null,{default:a(()=>[e(y,{placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0...","allow-clear":"",style:{width:"250px"},modelValue:o.q,"onUpdate:modelValue":t[0]||(t[0]=n=>o.q=n)},null,8,["modelValue"]),e(_,{type:"primary",onClick:c},{icon:a(()=>[e($)]),default:a(()=>[me]),_:1})]),_:1})]),columns:a(()=>[e(i,{title:"\u7F16\u53F7",width:66,align:"center","data-index":"id"}),e(i,{title:"\u5206\u7C7B\u540D\u79F0","data-index":"name",width:120,align:"center"}),e(i,{title:"\u5173\u8054\u535A\u5BA2\u6570","data-index":"readCnt",width:80,align:"center"}),e(i,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createAt",width:150,align:"center"},{cell:a(({record:n})=>[f("span",null,b(r(F).$moment(n.createAt).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1}),e(i,{title:"\u4E0A\u4E0B\u67B6",width:100,align:"center"},{cell:a(({record:n})=>[e(k,{modelValue:n.status,"onUpdate:modelValue":h=>n.status=h,size:"medium","checked-value":1,"unchecked-value":0},{checked:a(()=>[d("\u4E0A\u67B6")]),unchecked:a(()=>[d("\u4E0B\u67B6")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{title:"\u64CD\u4F5C",width:200,align:"center"},{cell:a(({record:n})=>[e(R,null,{default:a(()=>[e(_,{type:"primary",size:"mini",onClick:h=>U(n)},{default:a(()=>[d("\u4FEE\u6539")]),_:2},1032,["onClick"]),e(N,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:h=>q(n.id)},{default:a(()=>[e(_,{type:"primary",status:"danger",size:"mini"},{default:a(()=>[d("\u5220\u9664")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["data","pagination","onPageChange","onPageSizeChange"])),[[L,g.value]]),e(H),e(J,{visible:u.value,"onUpdate:visible":t[3]||(t[3]=n=>u.value=n),onOk:I,onCancel:O},{title:a(()=>[d(b(o.classForm.id?"\u7F16\u8F91\u5206\u7C7B":"\u65B0\u589E\u5206\u7C7B"),1)]),default:a(()=>[f("div",null,[e(j,{model:o.classForm,ref:"formRef"},{default:a(()=>[e(x,{field:"name",label:"\u5206\u7C7B\u540D\u79F0"},{default:a(()=>[e(y,{placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0...","allow-clear":"",style:{width:"250px"},modelValue:o.classForm.name,"onUpdate:modelValue":t[1]||(t[1]=n=>o.classForm.name=n)},null,8,["modelValue"])]),_:1}),e(x,{field:"status",label:"\u4E0A\u4E0B\u67B6"},{default:a(()=>[e(k,{modelValue:o.classForm.status,"onUpdate:modelValue":t[2]||(t[2]=n=>o.classForm.status=n),"checked-value":1,"unchecked-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["visible"])])}}});const ye=le(pe,[["__scopeId","data-v-8f2fa213"]]);export{ye as default};
