import{_ as J}from"./GiFooter.1c7bdfe4.js";import{_ as K}from"./GiTable.f3a69a57.js";import"./index.10815fb0.js";import{u as Q}from"./usePagination.7bc3b5c6.js";import"./viewer.57c2a6be.js";import{d as V,r as X,A as v,l as s,f1 as Z,b as k,c as ee,a5 as ae,m as te,w as a,q as e,e as f,t as x,g as r,B as d,W as oe,aj as p,p as ne,i as se,_ as le}from"./index.3abf0d48.js";import{g as ue,d as ce,e as ie}from"./index.088b4522.js";import"./index.3f99109b.js";const D=m=>(ne("data-v-e37e2061"),m=m(),se(),m),re={class:"table-page"},de=D(()=>f("span",null,"\u65B0\u589E",-1)),me=D(()=>f("span",null,"\u641C\u7D22",-1)),_e=V({name:"Class"}),pe=V({..._e,setup(m){const{proxy:F}=oe(),o=X({q:"",dateTime:"",classForm:{id:0,name:"",status:1}}),g=v(!1),B=v([]),u=v(!1),{current:w,pageSize:y,total:A,changeCurrent:S,changePageSize:z,setTotal:T}=Q(()=>{c()}),c=async()=>{let l={pageSize:y.value,current:w.value,q:o.q,date:o.dateTime};try{g.value=!0;const t=await ue(l);t.code&&(B.value=t.list,T(t.count))}catch(t){return t}finally{g.value=!1}};c();const P=()=>(o.classForm.id=0,F.$refs.formRef.resetFields(),u.value=!0),q=l=>(o.classForm=l,u.value=!0),U=async l=>{let t=await ce({id:l});return t.code===201?(c(),p.success(t.message)):p.error(t.message)},I=async()=>{let l=await ie({name:o.classForm.name,status:o.classForm.status,id:o.classForm.id});l.code===201?(c(),p.success(l.message),u.value=!1):p.error(l.message)},$=()=>{u.value=!1};return(l,t)=>{const O=s("icon-plus"),_=s("a-button"),b=s("a-input"),Y=s("icon-search"),M=s("a-input-group"),i=s("a-table-column"),C=s("a-switch"),N=s("a-popconfirm"),R=s("a-space"),G=K,H=J,E=s("a-form-item"),W=s("a-form"),j=s("a-modal"),L=Z("loading");return k(),ee("div",re,[ae((k(),te(G,{"row-key":"id",data:B.value,scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:{showPageSize:!0,total:r(A),current:r(w),pageSize:r(y)},onPageChange:r(S),onPageSizeChange:r(z),onRefresh:c},{"custom-extra":a(()=>[e(_,{type:"primary",onClick:P},{icon:a(()=>[e(O)]),default:a(()=>[de]),_:1}),e(M,null,{default:a(()=>[e(b,{placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0...","allow-clear":"",style:{width:"250px"},modelValue:o.q,"onUpdate:modelValue":t[0]||(t[0]=n=>o.q=n)},null,8,["modelValue"]),e(_,{type:"primary",onClick:c},{icon:a(()=>[e(Y)]),default:a(()=>[me]),_:1})]),_:1})]),columns:a(()=>[e(i,{title:"\u7F16\u53F7",width:66,align:"center","data-index":"id"}),e(i,{title:"\u6807\u7B7E\u540D\u79F0","data-index":"name",width:120,align:"center"}),e(i,{title:"\u5173\u8054\u535A\u5BA2\u6570","data-index":"readCnt",width:80,align:"center"}),e(i,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createAt",width:150,align:"center"},{cell:a(({record:n})=>[f("span",null,x(r(F).$moment(n.createAt).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1}),e(i,{title:"\u4E0A\u4E0B\u67B6",width:100,align:"center"},{cell:a(({record:n})=>[e(C,{modelValue:n.status,"onUpdate:modelValue":h=>n.status=h,size:"medium","checked-value":1,"unchecked-value":0},{checked:a(()=>[d("\u4E0A\u67B6")]),unchecked:a(()=>[d("\u4E0B\u67B6")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{title:"\u64CD\u4F5C",width:200,align:"center"},{cell:a(({record:n})=>[e(R,null,{default:a(()=>[e(_,{type:"primary",size:"mini",onClick:h=>q(n)},{default:a(()=>[d("\u4FEE\u6539")]),_:2},1032,["onClick"]),e(N,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:h=>U(n.id)},{default:a(()=>[e(_,{type:"primary",status:"danger",size:"mini"},{default:a(()=>[d("\u5220\u9664")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["data","pagination","onPageChange","onPageSizeChange"])),[[L,g.value]]),e(H),e(j,{visible:u.value,"onUpdate:visible":t[3]||(t[3]=n=>u.value=n),onOk:I,onCancel:$},{title:a(()=>[d(x(o.classForm.id?"\u7F16\u8F91\u6807\u7B7E":"\u65B0\u589E\u6807\u7B7E"),1)]),default:a(()=>[f("div",null,[e(W,{model:o.classForm,ref:"formRef"},{default:a(()=>[e(E,{field:"name",label:"\u6807\u7B7E\u540D\u79F0"},{default:a(()=>[e(b,{placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0...","allow-clear":"",style:{width:"250px"},modelValue:o.classForm.name,"onUpdate:modelValue":t[1]||(t[1]=n=>o.classForm.name=n)},null,8,["modelValue"])]),_:1}),e(E,{field:"status",label:"\u4E0A\u4E0B\u67B6"},{default:a(()=>[e(C,{modelValue:o.classForm.status,"onUpdate:modelValue":t[2]||(t[2]=n=>o.classForm.status=n),"checked-value":1,"unchecked-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["visible"])])}}});const be=le(pe,[["__scopeId","data-v-e37e2061"]]);export{be as default};
