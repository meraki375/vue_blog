import{_ as S}from"./editor.39fed070.js";import{_ as $}from"./Mupload.vue_vue_type_script_setup_true_name_Wallpaper_lang.4e0c11cd.js";import{d as C,S as z,u as D,ai as N,A as E,r as j,l as r,b as i,c as f,q as a,w as l,F,f as k,m as w,B as m,g as K,aj as y,W as M,_ as T}from"./index.9d32ee8a.js";import{e as W,a as G}from"./index.38b44101.js";import{g as H}from"./index.a1df1d2f.js";import{g as J}from"./index.e2849fa3.js";import"./style.bf84156f.js";import"./index.ea7c4fc7.js";const O=C({name:"Blog_edit"}),P=C({...O,setup(Q){const c=z().query.id,_=D(),p=N().userInfo,g=E(),{proxy:x}=M(),e=j({form:{title:"",introduce:"",content:"",classId:null,status:1,cover_url:"",tabs:""},fileList:[],tabList:[]}),B=E([]),d={title:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898",trigger:"change"}],content:[{required:!0,message:"\u8BF7\u8F93\u5165\u5185\u5BB9",trigger:"change"}],classId:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B",trigger:"change"}]},I=()=>{x.$refs.form.validate(async n=>{if(!n){let o={id:c,title:e.form.title,introduce:e.form.introduce,content:e.form.content,classId:e.form.classId,status:e.form.status,cover_url:e.form.cover_url,senderName:p.username,uid:p.id,tabs:e.form.tabs?e.form.tabs.join(","):""},s=await W(o);s.code===201?(_.back(),y.success(s.message)):y.error(s.message)}})};return(async()=>{let n={pageSize:9999,current:1};const o=await H(n);B.value=o.list;const s=await J(n);if(e.tabList=s.list,c){const u=await G({id:c});e.form=u.article,u.article.cover_url&&(e.fileList=[{url:u.article.cover_url}])}})(),(n,o)=>{const s=r("a-input"),u=r("a-form-item"),L=r("a-textarea"),A=$,U=S,b=r("a-option"),v=r("a-select"),q=r("a-switch"),V=r("a-button"),h=r("a-space"),R=r("a-form");return i(),f("div",{class:"container",ref_key:"containerRef",ref:g},[a(R,{ref:"form",form:e.form,size:"medium",model:e.form,"auto-label-width":""},{default:l(()=>[a(u,{field:"title",label:"\u6807\u9898",rules:d.title},{default:l(()=>[a(s,{modelValue:e.form.title,"onUpdate:modelValue":o[0]||(o[0]=t=>e.form.title=t),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["modelValue"])]),_:1},8,["rules"]),a(u,{label:"\u7B80\u4ECB"},{default:l(()=>[a(L,{modelValue:e.form.introduce,"onUpdate:modelValue":o[1]||(o[1]=t=>e.form.introduce=t),placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB","max-length":100,"allow-clear":"","show-word-limit":"","auto-size":""},null,8,["modelValue"])]),_:1}),a(u,{field:"cover_url",label:"\u535A\u5BA2\u5C01\u9762"},{default:l(()=>[a(A,{fileList:e.fileList,fileKey:"cover_url",form:e.form,uploadFolder:"image"},null,8,["fileList","form"])]),_:1}),a(u,{field:"content",label:"\u5185\u5BB9",rules:d.content},{default:l(()=>[a(U,{formKey:"content",form:e.form,container:g.value},null,8,["form","container"])]),_:1},8,["rules"]),a(u,{field:"classId",label:"\u5206\u7C7B",rules:d.classId},{default:l(()=>[a(v,{modelValue:e.form.classId,"onUpdate:modelValue":o[2]||(o[2]=t=>e.form.classId=t),placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B"},{default:l(()=>[(i(!0),f(F,null,k(B.value,t=>(i(),w(b,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),a(u,{label:"\u5173\u8054\u6807\u7B7E"},{default:l(()=>[a(v,{modelValue:e.form.tabs,"onUpdate:modelValue":o[3]||(o[3]=t=>e.form.tabs=t),placeholder:"\u8BF7\u9009\u62E9\u6807\u7B7E",multiple:"","allow-clear":""},{default:l(()=>[(i(!0),f(F,null,k(e.tabList,t=>(i(),w(b,{value:t.id,key:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"\u4E0A\u4E0B\u67B6"},{default:l(()=>[a(q,{modelValue:e.form.status,"onUpdate:modelValue":o[4]||(o[4]=t=>e.form.status=t),"checked-value":1,"unchecked-value":0},{checked:l(()=>[m(" \u4E0A\u67B6 ")]),unchecked:l(()=>[m(" \u4E0B\u67B6 ")]),_:1},8,["modelValue"])]),_:1}),a(h,{class:"center"},{default:l(()=>[a(V,{type:"primary",onClick:o[5]||(o[5]=t=>I())},{default:l(()=>[m("\u63D0\u4EA4")]),_:1}),a(V,{onClick:o[6]||(o[6]=t=>K(_).back())},{default:l(()=>[m("\u8FD4\u56DE")]),_:1})]),_:1})]),_:1},8,["form","model"])],512)}}});const re=T(P,[["__scopeId","data-v-f58fd861"]]);export{re as default};
