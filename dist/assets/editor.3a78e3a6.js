import{T as k,E as w}from"./style.46d3bc77.js";import{d as y,J as E,I as F,O as I,A as V,r as f,o as n,a as i,i as g,c as _,j as c,b as m,h,P as u,w as L,F as N,f as O,p as S,l as T,_ as U}from"./index.3ca3cb15.js";import{u as K}from"./index.837433c1.js";const j=a=>(S("data-v-2e856312"),a=a(),T(),a),z={class:"container flex"},P=j(()=>g("span",{style:{"font-size":"22px"}},"\u6807\u9898\u76EE\u5F55",-1)),R=y({name:"Editor"}),A=y({...R,props:{id:{type:Number,default:()=>null},readonly:{type:Boolean,default:()=>!1},border:{type:Boolean,default:()=>!0},catalogue:{type:Boolean,default:()=>!0},disabled:{type:Boolean,default:()=>!1},formKey:String,form:Object},emits:["change"],setup(a,{emit:J}){const e=a,p=E({titleList:[]}),b={},C={placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9..."},s=F(),v=t=>{s.value=t;const l=async(r,d)=>{await K(r.name,r,"eidtor").then(o=>{if(o.code===200){const x="https://"+o.msg.Location;d(x)}})};t.getMenuConfig("uploadImage").customUpload=l};I(()=>{const t=s.value;t!=null&&t.destroy()});const B=t=>{p.titleList=t.getElemsByTypePrefix("header")};return V(()=>{e.disabled&&s.value.disable()}),(t,l)=>{const r=f("a-anchor-link"),d=f("a-anchor");return n(),i("div",z,[g("div",{class:u(e.border?"editor":"border")},[e.readonly?m("",!0):(n(),_(c(k),{key:0,style:{"border-bottom":"1px solid #ccc"},editor:c(s),defaultConfig:b},null,8,["editor"])),h(c(w),{style:{width:"100%","min-height":"360px",height:"100%","overflow-y":"hidden"},modelValue:e.form[e.formKey],"onUpdate:modelValue":l[0]||(l[0]=o=>e.form[e.formKey]=o),defaultConfig:C,onOnCreated:v,onOnChange:B},null,8,["modelValue"])],2),e.catalogue?(n(),i("div",{key:0,class:u(e.border?"title":"notitle")},[P,h(d,{"change-hash":!1},{default:L(()=>[(n(!0),i(N,null,O(p.titleList,o=>(n(),_(r,{key:o.id,href:"#"+o.id,title:o.children[0].text,class:u(o.type)},null,8,["href","title","class"]))),128))]),_:1})],2)):m("",!0)])}}});const G=U(A,[["__scopeId","data-v-2e856312"]]);export{G as _};
