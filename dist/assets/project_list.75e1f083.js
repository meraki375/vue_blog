import{_ as Q}from"./Mupload.vue_vue_type_script_setup_true_name_Wallpaper_lang.197b3b9e.js";import{_ as X}from"./GiFooter.710bbf8b.js";import{_ as Z}from"./GiTable.207b45f4.js";import"./index.10815fb0.js";import{u as ee}from"./usePagination.acfd674f.js";import"./viewer.d1d692fc.js";import{d as b,r as te,A as E,l,f1 as oe,b as B,c as ae,a5 as ne,m as le,w as a,q as e,e as f,t as x,g as c,B as v,W as ue,aj as p,p as re,i as se,_ as ie}from"./index.9adf62bd.js";import{g as ce,e as de}from"./index.f3b81e9b.js";import"./index.685b6aaa.js";import"./index.570bf779.js";const D=d=>(re("data-v-40c53254"),d=d(),se(),d),_e={class:"table-page"},me=D(()=>f("span",null,"\u65B0\u589E",-1)),pe=D(()=>f("span",null,"\u641C\u7D22",-1)),fe=b({name:"Project"}),ge=b({...fe,setup(d){const{proxy:C}=ue(),t=te({q:"",dateTime:"",form:{id:0,title:"",content:"",cover_url:[],progress:0},fileList:[]}),g=E(!1),h=E([]),r=E(!1),{current:y,pageSize:w,total:V,changeCurrent:k,changePageSize:S,setTotal:P}=ee(()=>{s()}),s=async()=>{let u={pageSize:w.value,current:y.value,q:t.q,date:t.dateTime};try{g.value=!0;const o=await ce(u);o.code&&(h.value=o.list,P(o.count))}catch(o){return o}finally{g.value=!1}};s();const z=()=>(t.form.id=0,t.fileList=[],C.$refs.formRef.resetFields(),r.value=!0),A=u=>(t.form={...u},u.cover_url&&(t.fileList=[{url:u.cover_url}]),r.value=!0),L=async u=>{let o=await delNote({id:u});return o.code===201?(s(),p.success(o.message)):p.error(o.message)},j=async()=>{let u=await de({title:t.form.title,content:t.form.content,cover_url:t.form.cover_url,progress:t.form.progress,id:t.form.id});u.code===201?(s(),p.success(u.message),r.value=!1):p.error(u.message)},q=()=>{r.value=!1};return(u,o)=>{const T=l("icon-plus"),_=l("a-button"),F=l("a-input"),$=l("icon-search"),I=l("a-input-group"),i=l("a-table-column"),U=l("a-popconfirm"),M=l("a-space"),N=Z,O=X,Y=Q,m=l("a-form-item"),R=l("a-textarea"),G=l("a-slider"),H=l("a-form"),W=l("a-modal"),K=oe("loading");return B(),ae("div",_e,[ne((B(),le(N,{"row-key":"id",data:h.value,scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:{showPageSize:!0,total:c(V),current:c(y),pageSize:c(w)},onPageChange:c(k),onPageSizeChange:c(S),onRefresh:s},{"custom-extra":a(()=>[e(_,{type:"primary",onClick:z},{icon:a(()=>[e(T)]),default:a(()=>[me]),_:1}),e(I,null,{default:a(()=>[e(F,{placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0...","allow-clear":"",style:{width:"250px"},modelValue:t.q,"onUpdate:modelValue":o[0]||(o[0]=n=>t.q=n)},null,8,["modelValue"]),e(_,{type:"primary",onClick:s},{icon:a(()=>[e($)]),default:a(()=>[pe]),_:1})]),_:1})]),columns:a(()=>[e(i,{title:"\u7F16\u53F7",width:66,align:"center","data-index":"id"}),e(i,{title:"\u9879\u76EE\u540D\u79F0","data-index":"title",width:120,align:"center"}),e(i,{title:"\u9879\u76EE\u4ECB\u7ECD","data-index":"content",width:120,align:"center"}),e(i,{title:"\u9879\u76EE\u8FDB\u5EA6","data-index":"progress",width:120,align:"center"}),e(i,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createAt",width:150,align:"center"},{cell:a(({record:n})=>[f("span",null,x(c(C).$moment(n.createAt).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1}),e(i,{title:"\u64CD\u4F5C",width:200,align:"center"},{cell:a(({record:n})=>[e(M,null,{default:a(()=>[e(_,{type:"primary",size:"mini",onClick:J=>A(n)},{default:a(()=>[v("\u67E5\u770B\u8BE6\u60C5")]),_:2},1032,["onClick"]),e(U,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?",onOk:J=>L(n.id)},{default:a(()=>[e(_,{type:"primary",status:"danger",size:"mini"},{default:a(()=>[v("\u5220\u9664")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["data","pagination","onPageChange","onPageSizeChange"])),[[K,g.value]]),e(O),e(W,{visible:r.value,"onUpdate:visible":o[4]||(o[4]=n=>r.value=n),onOk:j,onCancel:q},{title:a(()=>[v(x(t.form.id?"\u7F16\u8F91\u9879\u76EE":"\u65B0\u589E\u9879\u76EE"),1)]),default:a(()=>[f("div",null,[e(H,{model:t.form,ref:"formRef"},{default:a(()=>[e(m,{field:"cover_url",label:"\u9879\u76EE\u5C01\u9762"},{default:a(()=>[e(Y,{fileList:t.fileList,fileKey:"cover_url",form:t.form,uploadFolder:"image"},null,8,["fileList","form"])]),_:1}),e(m,{field:"title",label:"\u9879\u76EE\u6807\u9898"},{default:a(()=>[e(F,{placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u6807\u9898...","allow-clear":"",style:{width:"250px"},modelValue:t.form.title,"onUpdate:modelValue":o[1]||(o[1]=n=>t.form.title=n)},null,8,["modelValue"])]),_:1}),e(m,{field:"content",label:"\u9879\u76EE\u4ECB\u7ECD"},{default:a(()=>[e(R,{placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u4ECB\u7ECD...","allow-clear":"",modelValue:t.form.content,"onUpdate:modelValue":o[2]||(o[2]=n=>t.form.content=n)},null,8,["modelValue"])]),_:1}),e(m,{field:"progress",label:"\u9879\u76EE\u8FDB\u5EA6"},{default:a(()=>[e(G,{"default-value":0,modelValue:t.form.progress,"onUpdate:modelValue":o[3]||(o[3]=n=>t.form.progress=n),style:{width:"200px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["visible"])])}}});const De=ie(ge,[["__scopeId","data-v-40c53254"]]);export{De as default};
